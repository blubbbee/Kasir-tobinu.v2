<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tobinu Café — Kasir Pintar</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#00b45a">
  <link rel="icon" href="assets/icon-192.png">
  <link rel="apple-touch-icon" href="assets/icon-192.png">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <img id="logoImg" src="assets/logo.png" alt="logo">
      <div class="titles">
        <h1>Tobinu Café</h1>
        <span class="badge">Kasir Pintar (PWA)</span>
      </div>
    </div>
    <nav class="actions">
      <button class="pill" id="btn-settings">Pengaturan</button>
      <button class="pill" id="btn-export">Export CSV</button>
      <button class="pill" id="btn-clear-day">Reset Hari</button>
      <button class="pill" id="btn-receipts">Riwayat</button>
      <button class="pill" id="btn-print">Cetak Struk</button>
    </nav>
  </header>

  <main class="wrap">
    <section class="panel">
      <h3>Menu</h3>
      <div class="toolbar">
        <input id="search" class="input search" placeholder="Cari menu / ketik harga manual (mis: 12000)..." />
        <select id="sel-category" class="input">
          <option value="all">Semua Kategori</option>
        </select>
        <button class="btn" id="btn-add-manual">Tambah Item Manual</button>
        <button class="btn ghost" id="btn-add-product">Tambah Produk Baru</button>
      </div>
      <div class="category-tabs" id="category-tabs"></div>
      <div class="products" id="products"></div>
      <div class="notice">Tips: tambahkan gambar menu & ganti background dari **Pengaturan**. Data tersimpan lokal, aplikasi bisa offline.</div>
    </section>

    <section class="panel">
      <h3>Keranjang</h3>
      <div class="cart" id="cart"></div>
      <div class="row"><span>Subtotal</span><strong id="subtot">Rp0</strong></div>
      <div class="row"><span>Pajak (10%)</span><strong id="tax">Rp0</strong></div>
      <div class="row"><span>Service (5%)</span><strong id="svc">Rp0</strong></div>
      <div class="row"><span>Diskon</span><strong id="disc">Rp0</strong></div>
      <div class="row total"><span>Total</span><strong id="total">Rp0</strong></div>
      <div class="pay">
        <div class="grid2">
          <div>
            <label class="fine">Tipe Bayar</label>
            <select id="paytype" class="input">
              <option>Cash</option><option>QRIS</option><option>Kartu</option>
            </select>
          </div>
          <div>
            <label class="fine">Diskon</label>
            <div class="grid2">
              <input id="discVal" class="input" type="number" placeholder="Nilai" />
              <select id="discType" class="input">
                <option value="amount">Rp</option>
                <option value="percent">%</option>
              </select>
            </div>
          </div>
        </div>
        <div class="grid2">
          <div>
            <label class="fine">Aktifkan Pajak & Service</label><br>
            <label><input type="checkbox" id="taxOn" checked> Pajak 10%</label>
            <label style="margin-left:12px"><input type="checkbox" id="svcOn" checked> Service 5%</label>
          </div>
          <div>
            <label class="fine">Bayar</label>
            <input id="payAmt" class="input" type="number" placeholder="Jumlah uang" />
          </div>
        </div>
        <div class="row"><span>Kembalian</span><strong id="change">Rp0</strong></div>
        <button class="btn green" id="btn-charge">Proses Pembayaran</button>
      </div>
    </section>
  </main>

  <footer>
    <div>© <span id="year"></span> Tobinu Café — Mode Offline • Export CSV • Simpan Lokal</div>
    <div class="pill" id="today-stats">Hari ini: 0 transaksi • Rp0</div>
  </footer>

  <!-- Dialogs -->
  <dialog id="modal" class="dlg">
    <div class="head" id="modalTitle">Struk</div>
    <div class="body" id="modalBody"></div>
    <div class="actions"><button class="btn" id="modalClose">Tutup</button><button class="btn primary" id="modalPrintNow">Cetak</button></div>
  </dialog>

  <dialog id="dlgSettings" class="dlg wide">
    <div class="head">Pengaturan Tampilan</div>
    <div class="body">
      <div class="grid2">
        <div>
          <div class="mini">Logo Café</div>
          <input id="logoFile" type="file" accept="image/*">
          <img id="logoPreview" class="logo-preview">
          <button class="btn tiny" id="btnDelLogo">Hapus Logo</button>
        </div>
        <div>
          <div class="mini">Background</div>
          <input id="bgFile" type="file" accept="image/*">
          <input id="bgColor" class="input" placeholder="Warna (mis: #10121a atau green)">
          <div class="bg-preview" id="bgPreview"></div>
          <button class="btn tiny" id="btnDelBg">Hapus Background</button>
        </div>
      </div>
    </div>
    <div class="actions"><button class="btn" id="btnCloseSettings">Tutup</button><button class="btn primary" id="btnSaveSettings">Simpan</button></div>
  </dialog>

  <dialog id="dlgProduct" class="dlg">
    <div class="head" id="prodHead">Produk Baru</div>
    <div class="body">
      <form id="prodForm" class="prodform">
        <input class="input" id="pname" placeholder="Nama produk" required />
        <input class="input" id="pprice" type="number" placeholder="Harga (angka)" required />
        <input class="input" id="pcat" placeholder="Kategori (Coffee/Tea/Snack/..)" />
        <input class="input" id="ptag" placeholder="Tag (opsional)" />
        <div class="full">
          <input id="pimg" type="file" accept="image/*">
          <div class="tiny">Gambar menu (opsional)</div>
        </div>
      </form>
    </div>
    <div class="actions"><button class="btn" id="btnCancelProd">Batal</button><button class="btn green" id="btnSaveProd">Simpan Produk</button></div>
  </dialog>

  <script src="script.js"></script>
</body>
</html>
